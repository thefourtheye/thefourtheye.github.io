
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>thefourtheye's weblog</title>
  <meta name="author" content="Sakthipriyan Vairamani (thefourtheye)">

  
  <meta name="description" content="After having been in the vim camp in the vim vs Emacs editor war for eight years, I decided to peek into the enemy’s camp. The IDE users might look &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://thefourtheye.in/blog/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="thefourtheye's weblog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700" rel="stylesheet">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-93345189-1', 'auto');
    ga('send', 'pageview');
  </script>

  <h1><a href="/">thefourtheye's weblog</a></h1>
  
    <h2>opinions are my own; try code/suggestions at your own risk</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="thefourtheye.in">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/categories">Categories</a></li>
  <li><a href="/">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2017/05/21/emacs-cheat-sheet/">Emacs - Cheat Sheet</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-05-21T21:37:45+05:30'><span class='date'><span class='date-month'>May</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>9:37 pm</span></time>
        
           | <a href="/2017/05/21/emacs-cheat-sheet/#disqus_thread"
             data-disqus-identifier="http://thefourtheye.in/2017/05/21/emacs-cheat-sheet/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After having been in the vim camp in the <a href="https://en.wikipedia.org/wiki/Editor_war">vim vs Emacs editor war</a> for eight years, I decided to peek into the enemy’s camp. The IDE users might look down upon the editor users, but I still enjoy using my keyboard to do all the coding work. That is the reason why I chose to learn Emacs over an IDE.</p>

<p>When I started with Emacs, it was kind of scary. Editing text is straight forward, as in, it didn’t require me to change the mode like in Vim. But the control key sequences are way too much to remember compared to Vim. So I decided to understand the keys which are commonly used to move around the text in the screen, with the help of Emacs Tutorial (<code>Ctrl+h t</code>).</p>

<p>This cheat sheet has a few more key combinations which are used to do common operations on Emacs.</p>

<p><strong>Note:</strong> From now on, the <code>Ctrl</code> key will be represented as <code>C</code> and the <code>Alt</code> key (also called as <code>Meta</code> key) will be represented as <code>M</code>. For example, if the actual command is to press both <code>Ctrl</code> and <code>h</code> keys to invoke the help, then it would be written as <code>C-h</code>.</p>

<h2 id="common-operations">Common Operations</h2>

<table class="gridtable">
  <thead>
    <tr>
      <th>Key Combinations</th>
      <th>Functionality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>C-x C-c</code></td>
      <td>Quit Emacs</td>
    </tr>
    <tr>
      <td><code>C-h t</code></td>
      <td>Open built-in Emacs Tutorial file</td>
    </tr>
    <tr>
      <td><code>C-x C-f</code></td>
      <td>Open a File</td>
    </tr>
    <tr>
      <td><code>C-x k</code></td>
      <td>Close the currently opened file on screen</td>
    </tr>
    <tr>
      <td><code>C-x C-s</code></td>
      <td>Save the currently opened file</td>
    </tr>
    <tr>
      <td><code>C-x s</code></td>
      <td>Save all the open files</td>
    </tr>
    <tr>
      <td><code>C-g</code></td>
      <td>Discard the current command</td>
    </tr>
  </tbody>
</table>

<h2 id="split-window-operations">Split Window Operations</h2>

<table class="gridtable">
  <thead>
    <tr>
      <th>Key Combinations</th>
      <th>Functionality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>C-x 2</code></td>
      <td>Split the view horizontally</td>
    </tr>
    <tr>
      <td><code>C-x 3</code></td>
      <td>Split the view vertically</td>
    </tr>
    <tr>
      <td><code>C-x o</code> (English letter “o”)</td>
      <td>Switch to next split window</td>
    </tr>
    <tr>
      <td><code>C-x 0</code> (Number Zero)</td>
      <td>Kill the current window</td>
    </tr>
    <tr>
      <td><code>C-x 1</code></td>
      <td>Kill all other split windows except current window</td>
    </tr>
    <tr>
      <td><code>C-x C-b</code></td>
      <td>List all open files in a new split window</td>
    </tr>
    <tr>
      <td><code>C-x b</code></td>
      <td>Bring any of the open files to the front, by name</td>
    </tr>
  </tbody>
</table>

<h2 id="cursor-movement">Cursor Movement</h2>

<table class="gridtable">
  <thead>
    <tr>
      <th>Key Combinations</th>
      <th>Functionality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>C-b</code></td>
      <td>Move one character backward</td>
    </tr>
    <tr>
      <td><code>M-b</code></td>
      <td>Move one word backward</td>
    </tr>
    <tr>
      <td><code>C-f</code></td>
      <td>Move one character forward</td>
    </tr>
    <tr>
      <td><code>M-f</code></td>
      <td>Move one word forward</td>
    </tr>
    <tr>
      <td><code>C-v</code></td>
      <td>Scroll one page full of information forward</td>
    </tr>
    <tr>
      <td><code>M-v</code></td>
      <td>Scroll one page full of information backward</td>
    </tr>
    <tr>
      <td><code>C-a</code></td>
      <td>Beginning of current line</td>
    </tr>
    <tr>
      <td><code>M-a</code></td>
      <td>Beginning of current sentence</td>
    </tr>
    <tr>
      <td><code>C-e</code></td>
      <td>Ending of current line</td>
    </tr>
    <tr>
      <td><code>M-e</code></td>
      <td>Ending of current sentence</td>
    </tr>
    <tr>
      <td><code>M-&gt;</code></td>
      <td>End of file</td>
    </tr>
    <tr>
      <td><code>M-&lt;</code></td>
      <td>Beginning of file</td>
    </tr>
    <tr>
      <td><code>C-n</code></td>
      <td>Next line</td>
    </tr>
    <tr>
      <td><code>C-p</code></td>
      <td>Previous line</td>
    </tr>
    <tr>
      <td><code>C-l</code></td>
      <td>Move the current line to bottom, middle, and start of screen</td>
    </tr>
  </tbody>
</table>

<h2 id="edit-operations">Edit Operations</h2>

<table class="gridtable">
  <thead>
    <tr>
      <th>Key Combinations</th>
      <th>Functionality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>C-x u</code> <code>C-/</code></td>
      <td>Undo last operation</td>
    </tr>
    <tr>
      <td><code>C-k</code></td>
      <td>Delete till the end of the current line from current position</td>
    </tr>
    <tr>
      <td><code>M-k</code></td>
      <td>Delete till the end of the current sentence from current position</td>
    </tr>
    <tr>
      <td><code>C-d</code></td>
      <td>Delete the next character</td>
    </tr>
    <tr>
      <td><code>M-d</code></td>
      <td>Delete the next word</td>
    </tr>
    <tr>
      <td><code>C-&lt;Del&gt;</code></td>
      <td>Delete the previous character</td>
    </tr>
    <tr>
      <td><code>M-&lt;Del&gt;</code></td>
      <td>Delete the previous word</td>
    </tr>
  </tbody>
</table>

<h2 id="copy-and-paste">Copy and Paste</h2>

<table class="gridtable">
  <thead>
    <tr>
      <th>Key Combinations</th>
      <th>Functionality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>C-&lt;Space&gt;</code></td>
      <td>Set mark to select text. Now with movement keys select the text</td>
    </tr>
    <tr>
      <td><code>C-x h</code></td>
      <td>Select the whole buffer</td>
    </tr>
    <tr>
      <td><code>C-w</code></td>
      <td>Cut the selected text</td>
    </tr>
    <tr>
      <td><code>M-w</code></td>
      <td>Copy the selected text</td>
    </tr>
    <tr>
      <td><code>C-y</code></td>
      <td>Yank (paste) the selected text</td>
    </tr>
  </tbody>
</table>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2017/02/21/javascript-lookbehind-regex-alternative/">JavaScript Lookbehind RegEx Alternative</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-02-21T21:33:13+05:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>9:33 pm</span></time>
        
           | <a href="/2017/02/21/javascript-lookbehind-regex-alternative/#disqus_thread"
             data-disqus-identifier="http://thefourtheye.in/2017/02/21/javascript-lookbehind-regex-alternative/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently one of my colleagues came to me with a problem. He had a string which looked like JSON but not a valid JSON string. For example,</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="js"><span class="line"><span class="p">[{</span><span class="err">\</span><span class="s2">&quot;name\&quot;:\&quot;Kilua\&quot;\\,\&quot;age\&quot;:35}],{\&quot;city\&quot;:\&quot;SJC\&quot;},\&quot;US\&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>and they wanted to split the string at all the commas, except when they are preceded by a backslash. That means, they wanted</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="js"><span class="line"><span class="p">[</span> <span class="s1">&#39;[{&quot;name&quot;:&quot;Kilua&quot;\\,&quot;age&quot;:35}]&#39;</span><span class="p">,</span> <span class="s1">&#39;{&quot;city&quot;:&quot;SJC&quot;},&quot;US&quot;&#39;</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>

<p>as output. If the requirement was to split the string at commas followed by a certain string, then it would have been pretty straight forward. For example, if the string is <code>a,1,b,2,c,3</code> and if they wanted to split the string at all commas except when they are not followed by numbers, then the solution would have been very simple, with negative lookahead, like this</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="js"><span class="line"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;a,1,b,2,c,3&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/,(?!\d)/</span><span class="p">));</span>
</span><span class="line"><span class="c1">// [ &#39;a,1&#39;, &#39;b,2&#39;, &#39;c,3&#39; ]</span>
</span></code></pre></td></tr></table></div></figure>

<p>Since JavaScript doesn’t have lookbehinds, we don’t have a straight forward solution to this problem. When I searched Stackoverflow, I found this solution</p>

<figure class="code"><figcaption><span>WTK's answer in Stackoverflow</span><a href="">link</a></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="js"><span class="line"><span class="s1">&#39;a\\,bcde,fgh,ijk\\,lmno,pqrst\\,uv&#39;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/([^\\]),/g</span><span class="p">,</span> <span class="s1">&#39;$1\u000B&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;\u000B&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>This solves the exact same problem which my colleague was facing. It compensates the absence of lookbehinds by breaking down the problem in two steps.</p>

<ol>
  <li>Replace all the commas matching the condition with a marker string which does not appear anywhere in the string. (<code>\u000B</code> in this case)</li>
  <li>Then split the original string with the marker string.</li>
</ol>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2016/11/15/js-quirks-stringified-numbers/">JS Quirks: Stringified Numbers</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-11-15T00:38:30+05:30'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>12:38 am</span></time>
        
           | <a href="/2016/11/15/js-quirks-stringified-numbers/#disqus_thread"
             data-disqus-identifier="http://thefourtheye.in/2016/11/15/js-quirks-stringified-numbers/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When I was working on <a href="https://github.com/nodejs/node/pull/9492">Node.js PR 9492</a>, <a href="https://github.com/nodejs/node/pull/9492#discussion_r86987446">this comment</a></p>

<blockquote>
  <p>This should probably test for a wider range of values. <code>test/parallel/test-net-internal.js</code> has some good examples.</p>
</blockquote>

<p>made me look at <a href="https://github.com/nodejs/node/blob/fc44bd4d0b984f7b926b8c92b8e9a88da1c08921/test/parallel/test-net-internal.js">that file</a>. As I was going through the test, few of the bad values were interesting. I normally test with stringified positive decimal numbers and negative decimal numbers. But I saw stringified negative octal, binary, and hexa decimal numbers.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="js"><span class="line"><span class="kr">const</span> <span class="nx">bad</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[],</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="mh">0xFFFF</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">Infinity</span><span class="p">,</span>
</span><span class="line">             <span class="o">-</span><span class="kc">Infinity</span><span class="p">,</span> <span class="kc">NaN</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="s1">&#39;0x&#39;</span><span class="p">,</span>
</span><span class="line">             <span class="s1">&#39;-0x1&#39;</span><span class="p">,</span> <span class="s1">&#39;-0o1&#39;</span><span class="p">,</span> <span class="s1">&#39;-0b1&#39;</span><span class="p">,</span> <span class="s1">&#39;0o&#39;</span><span class="p">,</span> <span class="s1">&#39;0b&#39;</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>

<p>I got curious as I have never used them before, I just wanted to see their corresponding negative values. So I wrote a program like this</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="js"><span class="line"><span class="p">[</span><span class="o">-</span><span class="mh">0x1</span><span class="p">,</span> <span class="s1">&#39;-0x1&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="nx">o1</span><span class="p">,</span> <span class="s1">&#39;-0o1&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="nx">b1</span><span class="p">,</span> <span class="s1">&#39;-0b1&#39;</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="o">+</span><span class="nx">item</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>

<p>and I was expecting to see the result</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="text"><span class="line">-1 -1
</span><span class="line">-0x1 -1
</span><span class="line">-1 -1
</span><span class="line">-0o1 -1
</span><span class="line">-1 -1
</span><span class="line">-0b1 -1
</span></code></pre></td></tr></table></div></figure>

<p>but all I got was</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="text"><span class="line">-1 -1
</span><span class="line">-0x1 NaN
</span><span class="line">-1 -1
</span><span class="line">-0o1 NaN
</span><span class="line">-1 -1
</span><span class="line">-0b1 NaN
</span></code></pre></td></tr></table></div></figure>

<p>The unary - operator simply negates the magnitude of the numbers. The stringified numbers were not processed in the same way as their number counterparts. So I looked at the ECMAScript specification’s <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-tonumber-applied-to-the-string-type">ToNumber Applied to the String Type</a> section (which is actually responsible for converting strings to numbers).</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="text"><span class="line">StrNumericLiteral :::
</span><span class="line">    StrDecimalLiteral
</span><span class="line">    BinaryIntegerLiteral
</span><span class="line">    OctalIntegerLiteral
</span><span class="line">    HexIntegerLiteral
</span><span class="line">...
</span><span class="line">...
</span><span class="line">StrDecimalLiteral :::
</span><span class="line">    StrUnsignedDecimalLiteral
</span><span class="line">    + StrUnsignedDecimalLiteral
</span><span class="line">    - StrUnsignedDecimalLiteral
</span></code></pre></td></tr></table></div></figure>

<p>Only the <code>StrDecimalLiteral</code> production allows signed numbers. If we look at the definition of others in the <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-literals-numeric-literals">Numeric Literals</a> section,</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="code"><pre><code class="text"><span class="line">BinaryIntegerLiteral ::
</span><span class="line">    0b BinaryDigits
</span><span class="line">    0B BinaryDigits
</span><span class="line">
</span><span class="line">BinaryDigits ::
</span><span class="line">    BinaryDigit
</span><span class="line">    BinaryDigits BinaryDigit
</span><span class="line">
</span><span class="line">BinaryDigit :: one of
</span><span class="line">    0 1
</span><span class="line">
</span><span class="line">OctalIntegerLiteral ::
</span><span class="line">    0o OctalDigits
</span><span class="line">    0O OctalDigits
</span><span class="line">
</span><span class="line">OctalDigits ::
</span><span class="line">    OctalDigit
</span><span class="line">    OctalDigits OctalDigit
</span><span class="line">
</span><span class="line">OctalDigit :: one of
</span><span class="line">    0 1 2 3 4 5 6 7
</span><span class="line">
</span><span class="line">HexIntegerLiteral ::
</span><span class="line">    0x HexDigits
</span><span class="line">    0X HexDigits
</span><span class="line">
</span><span class="line">HexDigits ::
</span><span class="line">    HexDigit
</span><span class="line">    HexDigits HexDigit
</span><span class="line">
</span><span class="line">HexDigit :: one of
</span><span class="line">    0 1 2 3 4 5 6 7 8 9 a b c d e f A B C D E F
</span></code></pre></td></tr></table></div></figure>

<p>So, as per the specification, only the decimal numbers can have signs in the stringified number form. That is why the others are not considered as numbers.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2016/03/06/dsl-2730u-routers-ipv6-problem-in-ubuntu/">DSL-2730U Router's Ipv6 Problem in Ubuntu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-03-06T20:32:00+05:30'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>8:32 pm</span></time>
        
           | <a href="/2016/03/06/dsl-2730u-routers-ipv6-problem-in-ubuntu/#disqus_thread"
             data-disqus-identifier="http://thefourtheye.in/2016/03/06/dsl-2730u-routers-ipv6-problem-in-ubuntu/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Today I faced a very strange problem. I got a new Tata DOCOMO connection and I wanted to fetch upstream changes from a GitHub repository, with <code>git fetch --all</code>. But all I got was<pre>fatal: unable to access 'https://github.com/&lt;repo&gt;': Failed to connect to github.com port 443: Network is unreachable<br /></pre>I thought that the internet connection has a problem. But then I was able to <code>ping github.com</code> and access that site in my browser, although curl still failed.<br /><pre>➜  io.js git:(master) ✗ curl https://github.com<br />curl: (7) Failed to connect to github.com port 443: Network is unreachable</pre>At this point I became curious and tried out the verbose curl,<br /><pre>➜  io.js git:(master) ✗ curl -v https://github.com<br />* Rebuilt URL to: https://github.com/<br />* Hostname was NOT found in DNS cache<br />*   Trying 192.30.252.128...<br />*   Trying 64:ff9b::c01e:fc81...<br />* connect to 64:ff9b::c01e:fc81 port 443 failed: Network is unreachable<br />* Failed to connect to github.com port 443: Network is unreachable<br />* Closing connection 0<br />curl: (7) Failed to connect to github.com port 443: Network is unreachable</pre>Now, it figures out both the IPv4 address and the IPv6 address but favors IPv6 over IPv4. And it looks like, either the modem or the ISP don't support IPv6 based communication. I don't know how to confirm what the actual problem is. I tried to upgrade the firmware of my DSL-2730U router, by logging into 192.168.1.1. But it kept failing, saying the the firmware image file is too big.<br /><br />So, I decided to disable IPv6 in my Ubuntu machine and I followed the instructions given <a href="http://askubuntu.com/a/484487/147253">here</a> and it worked perfectly. Basically, I edited <code>/etc/sysctl.conf</code> file to include the following lines<pre># disable IPv6 on this machine<br />net.ipv6.conf.all.disable_ipv6 = 1<br />net.ipv6.conf.default.disable_ipv6 = 1<br />net.ipv6.conf.lo.disable_ipv6 = 1</pre>and then executed <code>sudo sysctl --system</code> and <code>sudo sysctl -p</code>.<br /></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2016/02/03/sane-ecmascript-6-generators/">Sane ECMAScript 6 Generators</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-02-03T20:47:00+05:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2016</span></span> <span class='time'>8:47 pm</span></time>
        
           | <a href="/2016/02/03/sane-ecmascript-6-generators/#disqus_thread"
             data-disqus-identifier="http://thefourtheye.in/2016/02/03/sane-ecmascript-6-generators/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">This post is cross posted in Medium, <a href="https://medium.com/@thefourtheye/sane-ecmascript-6-generators-7d1adcd85536#.cpvn9y4n8">here</a>.<br /><br />I recently found one interesting thing about ES6 Generators. I come from Python background and I understood generators as in Python. So, I expected the following Python code's equivalent ECMAScript 6 code also to work as well. <!--?prettify lang=python linenums=true?--><br /><pre class="prettyprint">>>> numbers = (num for num in range(10))<br />>>> for num in numbers:<br />...   if num == 3:<br />...     break<br />... <br />>>> next(numbers)<br />4<br /></pre>You can find the online demo for this Python program, <a href="http://ideone.com/9lYJOz">here</a>.<br /><br />But then, when I used Babel to transpile the following code and executed it<!--?prettify lang=javascript linenums=true?--><br /><pre class="prettyprint">function* NumberGenerator() {<br />  for (var i = 0; i < 10; i += 1) {<br />    yield i;<br />  }<br />}<br /><br />var numbers = NumberGenerator();<br /><br />for (var num of numbers) {<br />  if (num === 3) {<br />    break;<br />  }<br />}<br /><br />console.log(numbers.next());<br />// {"done":true}<br /></pre>You can find the online demo for this JavaScript program, made with Babel's REPL, <a href="https://babeljs.io/repl/#?experimental=true&evaluate=true&loose=false&spec=true&code=function*%20NumberGenerator()%20%7B%0A%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%2010%3B%20i%20%2B%3D%201)%20%7B%0A%20%20%20%20yield%20i%3B%0A%20%20%7D%0A%7D%0A%0Avar%20numbers%20%3D%20NumberGenerator()%3B%0A%0Afor%20(var%20num%20of%20numbers)%20%7B%0A%20%20if%20(num%20%3D%3D%3D%203)%20%7B%0A%20%20%20%20break%3B%0A%20%20%7D%0A%7D%0A%0Aconsole.log(numbers.next())%3B%0A">here</a>.  As you see here, when I broke out of the loop, the Generator Object got closed. This was pointed out to me by <a href="http://stackoverflow.com/users/785065/loganfsmyth">Logan Smyth</a> in Babel's Slack discussion. I was really surprised by this behavior and found the <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset">13.7.5.13 Runtime Semantics: ForIn/OfBodyEvaluation ( lhs, stmt, iterator, lhsKind, labelSet )</a> section in the ECMAScript 6 Specification, which says  <blockquote>If LoopContinues(result, labelSet) is false, return IteratorClose(iterator, UpdateEmpty(result, V)).</blockquote>I am not sure about the rationale behind that decision, but I am convinced that it would effectively limit the potential of the Generators. So I decided to fix this.  <h2>Sane Generators</h2>To close the iterator, <code>Iterator.prototype.return</code> is called. (At the time of this writing, not many JavaScript Engines support this function. You can find the support for this feature by popular engines, <a href="https://kangax.github.io/compat-table/es6/#test-generators_yield_*,_iterator_closing">here</a>.) So I decided to override that and allow the actual <code>return</code> function to be invoked only when explicitly called with an argument.<!--?prettify lang=javascript?--><pre class="prettyprint">function returnFunction(originalReturn, genObject) {<br />  return function(arg) {<br />    return arguments.length ? originalReturn.call(genObject, arg) : {<br />      done: false<br />    };<br />  };<br />}<br /><br />function SaneGenerator(genObject) {<br />  var originalReturn = genObject['return'];<br /><br />  if (typeof originalReturn === 'function') {<br />    Object.defineProperty(genObject, 'return', {<br />      value: returnFunction(originalReturn, genObject)<br />    });<br />  }<br /><br />  return genObject;<br />}</pre>You can see the actual and complete implementation in my GitHub repository, <a href="https://github.com/thefourtheye/sane-generator/blob/master/index.js">https://github.com/thefourtheye/sane-generator</a>.  Now, you can use the <code>SaneGenerator</code> like this <!--?prettify lang=javascript?--><pre class="prettyprint">function* NumberGenerator() {<br />  for (var i = 0; i < 10; i += 1) {<br />    yield i;<br />  }<br />}<br /><br />var numbers = SaneGenerator(NumberGenerator());<br /><br />for (var num of numbers) {<br />  if (num === 3) {<br />    break;<br />  }<br />}<br /><br />console.log(numbers.next());<br />// {"value":4,"done":false}<br /></pre>You can find the online demo for this JavaScript program, made with Babel's REPL, <a href="https://babeljs.io/repl/#?experimental=true&evaluate=true&loose=false&spec=true&code=function%20returnFunction(originalReturn%2C%20genObject)%20%7B%0A%20%20return%20function(arg)%20%7B%0A%20%20%20%20return%20arguments.length%20%3F%20originalReturn.call(genObject%2C%20arg)%20%3A%20%7B%0A%20%20%20%20%20%20done%3A%20false%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%7D%0A%0Afunction%20SaneGenerator(genObject)%20%7B%0A%20%20var%20originalReturn%20%3D%20genObject%5B'return'%5D%3B%0A%0A%20%20if%20(typeof%20originalReturn%20%3D%3D%3D%20'function')%20%7B%0A%20%20%20%20Object.defineProperty(genObject%2C%20'return'%2C%20%7B%0A%20%20%20%20%20%20value%3A%20returnFunction(originalReturn%2C%20genObject)%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20return%20genObject%3B%0A%7D%0A%0Afunction*%20NumberGenerator()%20%7B%0A%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%2010%3B%20i%20%2B%3D%201)%20%7B%0A%20%20%20%20yield%20i%3B%0A%20%20%7D%0A%7D%0A%0Avar%20numbers%20%3D%20SaneGenerator(NumberGenerator())%3B%0A%0Afor%20(var%20num%20of%20numbers)%20%7B%0A%20%20if%20(num%20%3D%3D%3D%203)%20%7B%0A%20%20%20%20break%3B%0A%20%20%7D%0A%7D%0A%0Aconsole.log(numbers.next())%3B%0A">here</a>.  <h2>NPM Module</h2>This is available as an NPM module now. <a href="https://www.npmjs.com/package/sane-generator">https://www.npmjs.com/package/sane-generator</a> </div></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2017/05/21/emacs-cheat-sheet/">Emacs - Cheat Sheet</a>
      </li>
    
      <li class="post">
        <a href="/2017/02/21/javascript-lookbehind-regex-alternative/">JavaScript Lookbehind RegEx Alternative</a>
      </li>
    
      <li class="post">
        <a href="/2016/11/15/js-quirks-stringified-numbers/">JS Quirks: Stringified Numbers</a>
      </li>
    
      <li class="post">
        <a href="/2016/03/06/dsl-2730u-routers-ipv6-problem-in-ubuntu/">DSL-2730U Router's Ipv6 Problem in Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/2016/02/03/sane-ecmascript-6-generators/">Sane ECMAScript 6 Generators</a>
      </li>
    
      <li class="post">
        <a href="/2016/01/10/sublime-text-3-unhiding-menu-in-ubuntu/">Sublime Text 3 Unhiding Menu in Ubuntu - Simpler Solution</a>
      </li>
    
      <li class="post">
        <a href="/2015/02/15/python-35-and-django-17s-htmlparseerror/">Python 3.5 and Django 1.7's HTMLParseError</a>
      </li>
    
      <li class="post">
        <a href="/2015/02/01/ubuntu-overlapping-displays-while-scaling-dual-monitor-setup/">Ubuntu Overlapping Displays While Scaling Dual Monitor Setup</a>
      </li>
    
      <li class="post">
        <a href="/2014/12/30/Python-venv-problem-with-ensurepip-in-Ubuntu/">Python's Venv Problem With Ensurepip in Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/2014/09/15/sending-postput-requests-with-json-form/">Sending POST/PUT Requests, With JSON Form Body, in Node.js</a>
      </li>
    
  </ul>
</section>




<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/ubuntu'>ubuntu (15)</a></li><li><a href='/blog/categories/sport-programming'>sport programming (15)</a></li><li><a href='/blog/categories/python'>python (11)</a></li><li><a href='/blog/categories/dynamic-programming'>dynamic programming (8)</a></li><li><a href='/blog/categories/sublime'>sublime (5)</a></li><li><a href='/blog/categories/spoj'>spoj (5)</a></li><li><a href='/blog/categories/node-dot-js'>node.js (5)</a></li><li><a href='/blog/categories/javascript'>javascript (4)</a></li><li><a href='/blog/categories/project-euler'>project euler (4)</a></li><li><a href='/blog/categories/mathematics'>mathematics (3)</a></li><li><a href='/blog/categories/bug'>bug (3)</a></li><li><a href='/blog/categories/uva'>uva (3)</a></li><li><a href='/blog/categories/chrome'>chrome (2)</a></li><li><a href='/blog/categories/jquery'>jquery (2)</a></li><li><a href='/blog/categories/android'>android (2)</a></li><li><a href='/blog/categories/mongodb'>mongodb (2)</a></li><li><a href='/blog/categories/git'>git (1)</a></li><li><a href='/blog/categories/tju'>tju (1)</a></li><li><a href='/blog/categories/timus'>timus (1)</a></li><li><a href='/blog/categories/json'>json (1)</a></li><li><a href='/blog/categories/google-code-jam'>google code jam (1)</a></li><li><a href='/blog/categories/apache'>apache (1)</a></li><li><a href='/blog/categories/web-dot-py'>web.py (1)</a></li><li><a href='/blog/categories/select2'>select2 (1)</a></li><li><a href='/blog/categories/topcoder'>topcoder (1)</a></li><li><a href='/blog/categories/mono'>mono (1)</a></li><li><a href='/blog/categories/django'>django (1)</a></li><li><a href='/blog/categories/ecmascript-6'>ecmascript 6 (1)</a></li><li><a href='/blog/categories/quirks'>quirks (1)</a></li><li><a href='/blog/categories/regex'>regex (1)</a></li><li><a href='/blog/categories/emacs'>emacs (1)</a></li></ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Sakthipriyan Vairamani (thefourtheye) -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'thefourtheyeblogger';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
